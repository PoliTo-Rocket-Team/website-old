!function(){"use strict";const e=window.matchMedia("(prefers-color-scheme: dark)");!function(e){if(!e)return console.log("No water-mark detected");window.addEventListener("scroll",function(e){let t;function n(){e(),t=null}return function(){t||(t=requestAnimationFrame(n))}}((function(){const t=.35*window.scrollY/window.innerHeight;e.style.setProperty("--t",t.toFixed(12))})))}(document.querySelector(".water-mark")),function(){const t=document.querySelectorAll('input[type="radio"][name="theme"]'),n=localStorage.getItem("theme");if(n){for(var o of(document.body.setAttribute("data-theme",n),t))if(o.value===n){o.checked=!0;break}}else document.body.setAttribute("data-theme","system");for(var o of t)o.addEventListener("change",c);function c(){document.body.setAttribute("data-theme",this.value),localStorage.setItem("theme",this.value);const t="system"===this.value?e.matches:"dark"===this.value;window.dispatchEvent(new CustomEvent("PRT:theme",{detail:{dark:t}}))}}(),function(e){const t=document.getElementById("page-nav"),n=t.querySelector("button"),o=document.getElementById("page-content");if(!t||!n||!o)return alert("No page-nav or page-content");const c="open-page-nav-state";history.state===c&&history.back(),window.addEventListener("popstate",(function(){if(!i)return;i=!1,t.classList.remove("open"),n.classList.remove("active"),o.classList.remove("unfocus"),o.removeEventListener("click",s),document.body.classList.remove("has-nav-open")})),n.addEventListener("click",(function(){history.state===c?history.back():(history.pushState(c,""),function(){if(i)return;i=!0,t.classList.add("open"),n.classList.add("active"),o.classList.add("unfocus"),o.addEventListener("click",s),document.body.classList.add("has-nav-open")}())}));let i=!1;function s(){history.state===c&&history.back()}window.addEventListener("scroll",function(e,t){let n=!1;return function(){n||(n=!0,setTimeout((()=>{t(),n=!1}),e))}}(100,(function(){let n=window.scrollY;if(t.classList.toggle("down",n>e),Math.abs(n-a)<10)return;t.classList.toggle("hide",n>a),a=n})));let a=window.scrollY;function r(){this.checked?document.body.addEventListener("click",d):document.body.removeEventListener("click",d)}function d(e){const t=document.querySelector(".link-combo > input:checked");t&&(t.parentElement.contains(e.target)||(document.querySelector(".link-combo > input").checked=!1,document.body.removeEventListener("click",d)))}document.querySelectorAll(".link-combo > input").forEach((e=>{e.checked=!1,e.addEventListener("change",r)}))}(70)}();
